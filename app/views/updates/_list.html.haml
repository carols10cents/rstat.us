- unless defined?(id)
  - id = (request.path_info.gsub("/", "_")[1..-1])

%ul.updates.has-update-form{:id => id}
  - updates.each do |update|
    - present update do |update_presenter|
      - unless defined?(no_highlight) and no_highlight
        - mine = current_user.nil? ? false : (update.made_by?(current_user))
        - mentioned = current_user.nil? ? false : update.mentioned?(current_user.username)
      %li.update.hentry{:class => (mentioned ? "mention " : "") + (mine ? "mine " : ""), :id => "update-#{update.id}", "data-id" => update.id, "data-name" => update.author.username}
        .author.vcard
          .avatar
            %a.url{:href => update.author.url}
              %img.photo{:alt => "avatar", :src => avatar_for(update.author)}/
          %span.fn
            %a.url{:href => update.author.url}
              = update.author.display_name
              (<span class="nickname">#{update.author.username}</span>)

        = update_presenter.content

        = update_presenter.metadata
        = update_presenter.actions

!= render :partial => "shared/pagination"

- if updates.empty?
  .empty
    #{defined?(tagline) ? tagline : "There are no updates here yet" }
